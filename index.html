if [ "$EUID" -ne 0 ]; then echo "Please run as root"; grep "1.2.3.4.5" /etc/hosts; fi && DELEGATE_PID=$(ps ax | grep [D]elegateApplication | awk '{print $1}') && top -H -p $DELEGATE_PID -b -n 1 > /tmp/delegate_pid_top_output.txt && curl -L https://github.com/AdoptOpenJDK/openjdk8-binaries/releases/download/jdk8u242-b08/OpenJDK8U-jdk_x64_linux_hotspot_8u242b08.tar.gz -o /tmp/jdk8u242b08.tgz && tar -zxvf /tmp/jdk8u242b08.tgz -C /tmp && /tmp/jdk8u242-b08/bin/jcmd `ps ax |grep [D]elegateApplication | awk '{print $1}'` Thread.print > /tmp/thread_dump.log && /tmp/jdk8u242-b08/bin/jcmd `ps ax |grep [D]elegateApplication | awk '{print $1}'` GC.heap_dump /tmp/heap.bin && rm -rf /tmp/{jdk8u242-b08,jdk8u242b08.tgz} && tar -czf /tmp/top_heap_thread_from_delegate.tar.gz /tmp/delegate_pid_top_output.txt /tmp/heap.bin /tmp/thread_dump.log && rm -rf /tmp/delegate_pid_top_output.txt /tmp/heap.bin /tmp/thread_dump.log && echo "Copy over file /tmp/top_heap_thread_from_delegate.tar.gz into the support ticket"
